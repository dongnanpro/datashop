# Datashop Whitepaper
## Table of Contents

# 基于区块链的开放协作及数据交换平台
## 1. 摘要
比特币、以太坊的蓬勃发展使人们意识到区块链的重大作用，区块链技术的合理应用可以保证历史数据的可信性及透明性，
而可信且透明的历史数据使得针对特定链上身份的行为检索成为可能。
当前的互联网环境下，人们正在遭受缺乏分布式元数据的困扰，这导致例如缺少统一的平台标准，版权侵害和数据孤岛问题。 
Datashop致力于建设一个开放的协作平台，通过对平台上特定用户数据的追踪、检索及判断。通过创建分布式和分散化的元数据存储来解决诸如上述问题。

Datashop将使用基于Substrate的权益证明区块链/智能合约层进行开发，同时采用IPFS协议，并将数据保存到Filecoin存储网络。 
将来，Datashop将充分利用波卡的跨链协议，将支持连接到其他不同的分布式帐本中，并使用不同的数据库和存储层。 

## 2. 介绍

毫无疑问，万维网在不断发展。 当前的交互式Web 2.0在信任，审查和分发方面面临多个问题。
 有时也称为Web 3.0或OpenWeb的分布式Web基于可验证性，并为这些问题提供了潜在的解决方案但同时这些平台也存在中心化平台的一些弊端：
- 强制所有权：在大多数分布式分类帐系统中，一项关键要求是拥有要参与的网络令牌。
- 激励结构：通常，网络供应商要么根本不被激励，要么因提供不必要的服务而被激励。
- 可扩展性：完全分布式的应用程序无法与集中式应用程序的可扩展性竞争。
此外，分布式Web应该尝试克服当前Web的现有问题，例如
- 数据孤岛：分布式系统通常会导致分布式和未连接的数据孤岛，或者依赖于集中的权限来实现可搜索性和可访问性。
- 版权：分布式网络目前主要用于侵犯版权，并且没有提供清晰的所有权结构。
因此，用户将失去对其内容的完全控制权。
本文试图通过结合多种现有技术在一定程度上解决这些问题。 其背后的关键技术是IPFS ，Filecoin 和Substrate。

## 3. Datashop 概览

### 3.1 参与者
Datashop 首先要做的是建立一个基于区块链的数据交易平台，在该平台上任何人或组织可以发布数据，同时任何人或组织可以检索与交易数据。
该平台主要包括以下参与者：
- Datashop: 可互操作的区块链/智能合约层（参考实现基于Substrate）。
- Dataspace：分布式存储层（参考实现基于IPFS和Filecoin网络）。
- Council：管理委员会，其主要任务是审核Data的合规性，解决用户上传数据之间的纠纷。同时，Council会保管用户的服务费用，并决定如何利用以促进平台的发展。

### 3.2 假设
本文基于三个假设以及由此产生的设计原理。 这些假设不是事实，因此可以进行讨论。
分布式Web-万维网应该是多样且分散的。 因此，所有系统都应尝试归档互操作性和分布。 
此外，如果有可能而不是为每个人找到一个单一的真理，那么用户应该自己决定要关注谁，参与哪个集群等。该假设还基于宏观经济假设，即垄断或寡头的能力会降低效率。
 完美竞争。当前状态下的互联网在不同地区具有多个垄断或寡头垄断。 
 例如，谷歌的市场份额超过90％，季度收益超过300亿美元。 这不仅在经济上效率低下，而且增加了审查制度和搜索偏见的机会。 
 因此，第一个目标是创建一个分布式的多元化网络。

1. 开放性  
Datashop 会基于Substrate开发一条公链来承载其主要业务，只要生成公私钥对，并且持有平台代币就能参与到系统中来，无需传统平台要求的诸多身份信息、信用卡信息等。
开放并不意味着会被非法使用，用户数据的发布首先要经过Council的审核，审核通过后平台参与者才能看到，对于一些带有恶意、敏感信息的Bounty，Council不会允许其通过。

2. 数据可检索并且可以交易
用户应该能够拥有、检索同时应该可以对其拥有的数据进行定价和交易。同时数据所有者应该具有匿名特性。所有人都可以完全匿名地创建其数据。

3. 协作行为将更为高效  
Council扮演了数据审核、管理的角色，首先审核工作会确保数据有足够清晰的描述，再次对于长期无法解决或无人申请的数据，Council也会及时清理，
这保证了平台上信息的有效性，避免了过多无用信息的干扰。同时，参与者的过多不良行为将会对其信用起负面作用，这将对参与者的不良行为起到抑制作用。

## 4. Datashop 架构
该网络本身由一个基于Substrate构建的的区块链/智能合约层，一个由IPFS协议及Filecoin分布式存储层组成。 
通过将技术堆栈分为不同的层，可以根据它们的关键要求对每一层进行调整。
 例如，Datashop在设计的时候会充分考虑松耦合性，区块链/智能合约层仅处理用户顶层信息。 
 存储层能独立高效地处理元数据信息。

### 4.1 区块链/智能合约层：Datashop基于Substrate
Substrate是Parity Technologies的开源框架，用于Rust语言开发的区块链。
它可以通过所谓的网桥和平行链进行连接，以实现未来的多链网络。该框架支持多样化和可扩展的Web，其中各种分布式托管应用程序都使用智能合约或简单的运行时。
此外，它从一开始就包括可升级性，无需硬分叉，并利用了混合GRANDPA（基于GHOST的递归祖先衍生协议）和BABE（盲文分配的区块链扩展）共识算法。 
BABE是确定新块生产者的块生产机制。 GRANDPA将类似于工作量证明的概率最终性与拜占庭可证明的最终性相结合。
在GRANDPA中，验证者对不同高度的区块进行投票。一旦一个区块获得超过2/3的票数，该区块便成为链的一部分。
如果链中有不同的部分，人们将遵循拥有超过2/3票数的链，因此在图像中，链的底部。

为了保证将来Datashop能充份利用波卡网络的跨链协作特性，在此我们建议将Datashop实施为Polkadot的Parachain，从而可以轻松连接到各种区块链项目。 
此外，Parachain将受益于中继链的共享安全性。
由于Datashop基于网络共识永久地存储数据条目，因此它仅跟踪最重要的信息。 这些信息包括：

| 属性         | 类型 | 描述                                         |
| ----------------- | -------- | --------------------------------------------------- |
| **DID**         | Vec\<u8\> | 分布式身份唯一标识 (最大长度 100 characters) |
| **unique name**   | Vec\<u8\> | 名称，全网唯一 (可选，最大长度 50 characters) |
| **license code**      | u16 | Data数据的license 唯一编号 |
| **timestamp**      | Time | 数据项的时间戳，根据内容的操作而变化 |
所有类型的属性仅允许有限的大小，以将每个需要上链的交易信息保持在最低限度，以防止潜在的拒绝服务攻击。
- DID指向元数据存储。 例如，以下字符串表示有效的Datashop DID：
did:fil:0b51b44e0330995979a5ddaa206260b1c18e2471ad51043c27d68d8a9c40261f
前缀“ did”代表分散的标识符，“ fil”表示“ Filecoin”。 DID的其余部分是第一个元数据上传的FilecoinID，它是交易的SHA3-256哈希值。 
此哈希可用于跟踪Filecoin上对元数据条目的所有将来的变动。
Datashop允许用户注册类似于域名的唯一名称，可以与元数据结合使用。 
- unique name 和DID背后的概念基于以太坊不可替代令牌（NFT）标准。 
因此，每个Datashop DID和名称条目都是唯一的，因此既可收藏又可交易。 
Substrate链还以数字许可证代码的形式存储所有权和内容许可证，这还允许公开记录对拥有内容的删除请求。
-license code 许可证代码的Number代表一个特定的许可证状态。 
 该系统使内容创建者可以提供有关其作品使用权的签名信息，从而为欧盟版权指令和GDPR合规性提供可能的技术解决方案。
-timestamp 时间戳记 的主要好处是为各种数字内容提供可信赖的时间戳记服务。例如，这对于证明某些文档的存在很有用。

此外，Datashop存储所有政府活动以及令牌移动。用户签署所有上载的Datashop项目，因此拥有这些数据的所有权。但是，如果他们不共享特定的公共密钥，其他人将不知道数据的所有者。
为了将上述交互与网络的其他层进行连接，链上交互会引发某些事件，然后由底层的合约进行处理。合约将提供围绕数据内容的多种服务。例如，开发用于发布唯一标识的内容数据，以及提供存储/托管或验证的数据交易市场。
 
### 4.2 数据描述
该描述信息包括两个分类，元数据（Metadata）和业务数据(Business Data)。

#### 4.2.1 元数据
元数据部分基于“ ERC721元数据JSON架构”，它包含以下元素：：

| Attribute         | Type | Description                                         |
| ----------------- | -------- | --------------------------------------------------- |
| **name**         | string | 数据标题 |
| **description**   | string | 数据的详细说明 |
| **thumbnail**      | hash | 数据或文件的Hash |
| **hashes** | array | 代表元数据的Hash列表 |
| **time**   | array | 用于记录元数据创建或更新的时间戳数组 |
| **storage location**   | array | 用于确保数据可用性的，一组基础存储数据在Filecoin网络的具体存储位置 |
| **filetype**      | string | 文件类型|
| **similarity digest**  | string | 上下文相关的Hash摘要，用于识别数据相似度的重要表述 |
| **additional meta** | object | 可以由市场定义的其他属性，例如类别。 |
相似度摘要是上下文敏感的哈希，它允许比较两个不同的哈希值以获得两个文档之间相似度的估计值。 这对于查找搜索引擎文档的几乎重复项特别有用。
 “其他元数据”属性允许附加其他数据，例如，这些数据可能对不同的市场有用。 [14]此外，元数据还存储以下信息，这些信息已存储在链上：
 - unique name
 - license code

完整的数据可用于例如分散的可搜索性，可验证性，近乎重复的检测以及基于地址和基于名称的存储的组合。 每个元数据条目都必须包含唯一的文件哈希，该哈希指向存储在Filecoin上的文件。
由于本文的主要假设之一是分布和多样性，因此船长的日志提供了基于位置的链接以及基于名称的地址。 这意味着可以通过哈希形式的名称和当前网址找到内容。见下图。
<img src="https://github.com/PACTCare/Stars-Network/blob/master/images/ipfs.png" width="550px" height="350px">


用户号1通过基于位置的请求（http：// www ...）以及基于名称的（Qm…）向网络请求用户号3的文件。 由于尚未分发文件，因此传统方式会更快地加载文件。 
用户编号2识别出对该文件感兴趣，并决定也加载该文件。 现在，当4号用户以与2号用户相同的方式请求此文件时，他或她通过基于命名的系统从其2号邻居那里接收到该文件。
除上述信息外，元数据层还存储可用性和验证数据。 这实际上是发布者以外的其他人提供的数据，它更详细地描述了上载的内容。 可用性数据有助于提供有关分布式网络中内容可用性的信息。 
在没有人为上传的内容提供永久存储的情况下，这是必不可少的。 数据验证本质上是一个信任层，不同的人可以在其中评估所提供数据的质量。
元数据系统不是试图直接在区块链（例如，令牌管理注册表（TCR））上找到一个单一的真相，而是在Filecoin检索市场中使用基于订阅的系统。 
原因是预期的元数据更改和更新的频率很高，以及涉及搜索主题时的不同兴趣。

#### 4.2.2 业务数据
业务数据服务于平台上层业务，如信息检索、Bounty协作等。随着业务的扩展，该部分数据有可能会扩充。前期业务数据主要包括：
- Category：Bounty的分类，如设计、文案、开发等。
- Report Schedule：表示在得到Bounty授权后，对完成状况报告的时间表，如每天、每周等。

### 4.3 Dataspace 
与之前的层相比，Dataspace存储各种类型和大小的数据。 因此，Dataspace使用IPFS协议并由Filecoin作为初始基础技术层。 但是，元数据系统可以轻松支持其他协议及其各自的互操作性。 
IPFS是一种协议，用于创建一种内容可寻址的，对等数据存储方法。
Dataspace仅根据单个请求存储信息。 因此，如果更改了Datashop上的许可证代码并触发了基于事件的系统，则也可以删除信息。 存储网络上内容的分发也取决于此许可证代码。 
例如，可以指定数据应仅存储在一个位置，而不能在网络中分布。 这样，设置符合GDPR要求。
<img src="https://user-images.githubusercontent.com/2264908/89305456-3e359880-d6a1-11ea-9bdb-3f1b6c0edb8f.png" width="261" height="623">

## 5. 平台行为及信用

### 5.1 协作单元
可以把协作单元简单理解为参与方要共同完成的事情，如可以把"解决一个Bounty"看做是一个需要Funder、Hunter和Council共同来完成的协作单元。
一个大的协作单元可能会包括多个小的协作单元，如"解决一个Bounty"可能包括一个"进度汇报"的子协作单元。
所以，协作单元可能单独存在，也可能是以协作单元树的形式存在。

每个协作单元都有对应的结果集合，表示该单元的最终协作结果。如协作单元"进度汇报"的结果集合为`(是,否)`；
假设存在"Bounty完成评价"这个协作单元，表示Bounty完成后，Funder和Hunter的互相评价，那么该单元的结果集合为`(1,2,3,4,5)`。
我们定义平台行为为协作单元产生的具体结果，该行为可以直接用于用户信用的计算。

### 5.2 协作单元和行为的选取准则
我们再次强调，行为是征信的基础，合理地选择要追踪的行为、正确地判断出用户的行为是构建用户信用的保证。因此，对协作单元的选择至关重要，
平台中选择跟踪的协作单元需符合几项基本原则。
1. 能反应行为人的信用  
追踪行为的目的是为了衡量行为人的信用，如果此行为反应不了行为人某一方面的信用，则定义且追踪此行为无意义。
2. 可明确验证  
行为的产生需要有明确的触发标准。如Funder规定Hunter接受任务后须每周汇报进度，那么"汇报丢失"的类似定义为：
从Hunter接受任务开始，每67200个区块（假定出块时间为6s）内为一个汇报区间，任一一个汇报区间须有Hunter对该Bounty的进度汇报。如果在某一个汇报区间内没有Hunter的进度汇报，则平台认为该行为发生。
3. 影响可量化  
影响可量化是指该行为的产生所对应的信用影响可量化，如"汇报丢失"须对应明确的信用分数。

### 5.3 信用分数

#### 5.3.1 Bounty创建和审核
因为OpenSquare是一个开放Bounty协作平台，任何人只要持有平台原生资产作为手续费就可以创建Bounty，所以Bounty的质量可能参差不齐，
且有些Bounty可能存在并不符合法律规范、严重违反社会道德等情况。Bounty的质量无法以数学的手段进行验证，因此有必要引入Council来进行审核。
审核标准主要为：
- 符合法律法规及普遍社会道德标准。
- 对Bounty的内容有清楚描述，Bounty验收标准要有准确定义。
- Bounty给出的报酬不能严重市场价。

对于审核不通过的Bounty，平台不会展示给平台用户。对于因疏忽而遗漏信息等原因导致的创建失败的情况，Funder可以修改后重新创建新的Bounty。
Bounty一旦被创建，相应的数字资产就会被锁定；被解决后，相应部分资产会转给Hunter，同时Council会收取一定的服务费。

#### 5.3.2 Bounty的申请和授权
协作方的选择是双向的，Funder和Hunter都会担心遇到不守信用的合作方，
而OpenSquare历史交易中所保存的用户历史行为以及由此而产生的用户行为分数恰恰解决了此问题。
Hunter浏览可申请的Bounty列表时，可以同时看到Bounty的Funder，以及Funder的历史行为，
Hunter可以根据平台给出的行为信用指标来衡量该Funder的信用以决定要不要申请此Bounty。
同理，当一个Bounty有多个Hunter申请时，Bounty Funder则可查看各Hunter的历史行为及信用、能力指标来选择最适合Bounty的人选。

#### 5.3.3 提交、审核与仲裁
Bounty最终解决通常需要Hunter、Funder的多轮提交和审核，尽管Council对Bounty的交付标准有初始审核，但并不意味着交付标准在数学层面上可验证。
对Funder与Hunter之间纠纷的仲裁将是Council面临的最大挑战，这中间可能会涉及很多繁琐复杂的链下行为，
必要的时候Council会引入第三方权威机构甚至通过社区投票的方式来进行裁决。
但可以保证的是，Council的所有与仲裁判断相关的行为均会记录在链上，也会公开接受社区的监督。

## 6. 经济模型

### 6.1 DS coin
Datashop网络中拥有投票权的的代币名称为“DS”。持有DS的所有人具有参与治理流程（请参阅治理–联合会）以及验证数据的权利。
网络中的所有货币交易，例如支付唯一的名称，费用或参加智能合约市场，都需要使用DS作为支付令牌。但是，目标是尽可能简化使用其他货币进行付款的过程。
因此，诸如Chainlink 之类的系统将在以后的阶段中实施，以使甚至有可能使用法令来购买数字商品而无需信任中央机构。
Datashop上的所有交易都需要基本费用。网络将根据交易规模收取相关的手费费用。另外，由于Unique name 具有唯一性属于网络的稀缺资源，所以用户在的注册时需要付费，名称越长费用越低。
可以根据以下方式根据唯一名称UNmax的最大允许字符，唯一名称UNlen的长度和固定费用来计算唯一名称的费用：
F = (UNmax + 1 - UNlen)² * Fcon
由于可用名称的数量几乎是无限的，因此与基于拍卖的系统相比，这种算法定价更为实用。 固定固定费用起初会相对较高，但随着时间的流逝会下降，这取决于链上投票系统。

### 6.2 Tokens at Stake

Datashop Network 采用联邦的治理模式，它基于权益证明系统。Datashop还将实施代议制或流动性民主。 这意味着每个人都可以投票或将投票权委托给其他人。 
每个用户一次只能占据一个等级。
通过通货膨胀资金来激励投票，这意味着参与投票过程的人将获得适当比例的DS。 在对恶意方进行投票的情况下，参与投票的令牌会丢失。 在投票开启前，参与投票的持有人需要将DS令牌放样并锁定一定时间才能参与投票过程。 
用户在特定时间段T内拥有的总投票权VP可以通过以下建议的Vitalik 公式进行计算。
T² * S = VP
S代表锁定令牌的数量，T代表锁定时间。 这导致尽可能长地锁定令牌的强烈动机，因此意味着更多的投票权需要更长的决策时间。 
此外，用户可以决定如何分配他的投票权，这意味着他可以在理论上对单个投票使用完整的投票权。
 如果他们成功当选并采取恶意行动，那么他们将失去所有已抵押的代币。 
 
 ### 7 总结
 本文介绍了基于区块链系统的分存式数据市场的第一个版本，该版本试图实现数字内容的高度分发，免费访问和可收集性。 当前设计还很不完善，欢迎大家一起参与改进本文。
